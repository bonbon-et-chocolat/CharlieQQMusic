<mvc:View
	controllerName="charlie.data.controller.Worklist"
	xmlns:m="sap.m"
	xmlns:mvc="sap.ui.core.mvc"
	xmlns="sap.uxap"
	xmlns:layout="sap.ui.layout">
	<ObjectPageLayout
		id="page">
		<headerTitle>
			<ObjectPageDynamicHeaderTitle>
				<expandedHeading>
						<m:Title text="周深QQ音乐音源数据" wrapping="true"/>
				</expandedHeading>

				<expandedContent>
					<m:Text text="上次更新：{dataModel>/data/updatedAt}"/>
				</expandedContent>

				<snappedContent>
					<m:Text text="周深QQ音乐音源数据"/>
				</snappedContent>

				<snappedTitleOnMobile>
					<m:Title text="周深QQ音乐音源数据 {dataModel>/data/updatedAt}"/>
				</snappedTitleOnMobile>
				<actions>
					<m:Button icon="sap-icon://feedback" text="辣锅纯辣锅" type="Transparent" press=".openAd"/>
				</actions>
			</ObjectPageDynamicHeaderTitle>
		</headerTitle>
		<headerContent>
			<m:FlexBox wrap="Wrap">
				<m:Avatar class="sapUiSmallMarginEnd" src="./img/zhoushen.png"  displaySize="L" />
				<layout:VerticalLayout class="sapUiSmallMarginBeginEnd">
					<m:Label text="QQ音乐粉丝总数： {dataModel>/data/fansCount}"/>
					<m:Label text="过去24小时收听总人数： {dataModel>/data/totalListenCount}万+"/>
					<m:Label text="数据非实时。每日更新。"/>
				</layout:VerticalLayout>
			</m:FlexBox>
		</headerContent>
		<sections>
			<ObjectPageSection titleUppercase="false" class="section" id="favSection" title="Personal" importance="Medium">
				<subSections>
					<ObjectPageSubSection id="favRank" title="收藏Top{dataModel>/result}" titleUppercase="false">
						<blocks>
							<m:Table
								id="table"
								width="auto"
								class="sapUiResponsiveMargin"
								growing="true"
								items="{
										path: 'dataModel>/data/details',
										sorter: {
											path: 'favCount',
											descending: true
										}
									}"
								busyIndicatorDelay="0">
								<m:headerToolbar>
									<m:Toolbar>
										<m:Label id="tableHeader" text=""/>
										<m:ToolbarSpacer />
										<m:SearchField id="searchField" width="auto" search=".onFilterSongs" />
									</m:Toolbar>
								</m:headerToolbar>
								<m:columns>
									<m:Column id="title">
										<m:Text text="歌曲"/>
									</m:Column>
									<m:Column id="fav">
										<m:Text text="收藏"/>
									</m:Column>
									<m:Column id="time">
										<m:Text text="发行时间"/>
									</m:Column>
								</m:columns>
								<m:items>
									<m:ColumnListItem
										vAlign="Middle"
										press=".onPress">
										<m:cells>
											<m:ObjectIdentifier
												title="{dataModel>title}"/>
											<m:ObjectNumber
												number="{
													path: 'dataModel>favCount',
													formatter: '.formatter.formatNumberWithCommas'
												}"/>
											<m:Text
												text="{dataModel>timePublic}"/>
										</m:cells>
									</m:ColumnListItem>
								</m:items>
							</m:Table>
						</blocks>
					</ObjectPageSubSection>
				</subSections>
			</ObjectPageSection>

			<ObjectPageSection titleUppercase="false" class="section" id="hotSection" title="Personal" importance="Medium">
				<subSections>
					<ObjectPageSubSection id="hit-rank" title="热歌榜" titleUppercase="false">
						<blocks>
							<m:Table
								id="hit-table"
								width="auto"
								class="sapUiResponsiveMargin"
								growing="true"
								items="{
										path: 'dataModel>/data/details',
										filters: [{path: 'score', operator: 'GT', value1: '0'}],
										sorter: {
											path: 'score',
											descending: true
										}
									}"
								busyIndicatorDelay="0">
								<m:headerToolbar>
									<m:Toolbar>
										<m:Label text=""/>
										<m:ToolbarSpacer />
										<m:SearchField id="search-hit" width="auto" search=".onFilterSongs($event, 'hit-table')" />
									</m:Toolbar>
								</m:headerToolbar>
								<m:columns>
									<m:Column>
										<m:Text text="歌曲"/>
									</m:Column>
									<m:Column>
										<m:Text text="巅峰指数"/>
									</m:Column>
									<m:Column>
										<m:Text text="收听人数（万+）"/>
									</m:Column>
								</m:columns>
								<m:items>
									<m:ColumnListItem
										vAlign="Middle"
										press=".onPress">
										<m:cells>
											<m:ObjectIdentifier
												title="{dataModel>title}"/>
											<m:ObjectNumber
												number="{
													path: 'dataModel>score',
													formatter: '.formatter.formatNumberWithCommas'
												}"/>
											<m:ObjectNumber
												number="{
													path: 'dataModel>hitListenCount',
													formatter: '.formatter.formatNumberWithCommas'
												}"/>
										</m:cells>
									</m:ColumnListItem>
								</m:items>
							</m:Table>
						</blocks>
					</ObjectPageSubSection>
				</subSections>
			</ObjectPageSection>
		</sections>
	</ObjectPageLayout>
</mvc:View>
